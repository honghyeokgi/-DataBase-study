## 🛢 데이터베이스  프로시저

--------------------------------------------------------------------------------

###### 프로시저 : SQL 명령문을 한개의 함수처럼 실행하기 위한것 n개 혹은 n개 이상의 쿼리가 될수있다.

장점

1. 한개의 쿼리문으로 여러개의 SQL 실행이 가능하다.
2. 네트워크 소요시간을 줄여준다
3. 긴 쿼리문을 줄일수 있다.
4. 프로그램에서 SQL 수정이 발생하는 경우 서버 프로그램을 실행하며 DB에서 프로시저를 수정하는것이기에 서버가 멈추지 않음

단점

1. 유지보수가 어렵다( 위와 같은 서버 프로그램 재기동이 필요가 없는 장점이 있지만.

   SP가 App 어디 사용되는지 확인이 어렵다.)



##### 프로시저 생성

```mysql
DELIMITER $$ # 묶음을 지정한다
CREATE PROCEDURE 프로시저이름(
	# 파라미터로 받을 데이터가 필요할경우 추가되는 영역이며 필요없으면 () 로 안의 내용은 생략
    IN '변수명' '변수타입',
    IN '변수명' '변수타입',
    .
    .
    .
)
BEGIN
	# 이 부분에 실행할 쿼리를 등록합니다.
	SELECT * FROM TEST WHERE ID = '변수명';
	INSERT INTO INSERTTEST VALUES('변수명');
	# UPDATE , DELETE 모두 가능하다

END $$
DELIMITER;
```

위와 같은 방법으로 프로시저를 생성하며 아래 이미지는 예제 입니다.





##### 조건문(IF)

```sql 
BEGIN 
IF '조건' THEN  'SQL';
ELSEIF '조건' THEN 'SQL';
ELSE 'SQL';
END IF
```

위와 같은 방식으로 IF  문을 활용할수 있습니다

##### 조건문(CASE)

```mysql
BEGIN
CASE
WHEN '조건' THEN 'SQL';
WHEN '조건' THEN 'SQL';
ELSE 'SQL';
END CASE;
```

위와 같은 방식으로 CASE 문을 활용할수 있습니다.



WHILE DO 문은 후에 추가하겠습니다!





출처

- https://m.blog.naver.com/cec7777/221722327481